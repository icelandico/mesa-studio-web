<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="robots" content="noindex" />
		<title>Content Manager</title>
	</head>
	<body>
		<!-- Include the script that builds the page and powers Decap CMS -->
		<div data-netlify-identity-button>Login with Netlify Identity</div>
		<script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
		<script>
			const netlifyIdentity = require('netlify-identity-widget');

			netlifyIdentity.init({
				container: '#netlify-modal', // defaults to document.body
				locale: 'en' // defaults to 'en'
			});

			netlifyIdentity.open(); // open the modal
			netlifyIdentity.open('login'); // open the modal to the login tab
			netlifyIdentity.open('signup'); // open the modal to the signup tab

			netlifyIdentity.on('init', (user) => console.log('init', user));
			netlifyIdentity.on('login', (user) => console.log('login', user));
			netlifyIdentity.on('logout', () => console.log('Logged out'));
			netlifyIdentity.on('error', (err) => console.error('Error', err));
			netlifyIdentity.on('open', () => console.log('Widget opened'));
			netlifyIdentity.on('close', () => console.log('Widget closed'));

			// Unbind from events
			netlifyIdentity.off('login'); // to unbind all registered handlers
			netlifyIdentity.off('login', handler); // to unbind a single handler

			// Close the modal
			netlifyIdentity.close();

			// Log out the user
			netlifyIdentity.logout();

			// refresh the user's JWT
			// Note: this method returns a promise.
			netlifyIdentity.refresh().then((jwt) => console.log(jwt));

			// Change language
			netlifyIdentity.setLocale('en');

			// Access the underlying GoTrue JS client.
			// Note that doing things directly through the GoTrue client brings a risk of getting out of
			// sync between your state and the widgetâ€™s state.
			netlifyIdentity.gotrue;
		</script>
	</body>
</html>
